---
description: "AWS guardrails: secrets, IAM, & environment segregation"
globs:
alwaysApply: true
---

## Secrets & identity
- YOU MUST **use IAM roles/instance profiles** instead of long-lived access keys. If legacy keys exist, YOU SHOULD rotate with Secrets Manager & plan a migration to roles.
- Secrets live in **AWS Secrets Manager**; fetch at runtime; NEVER commit to VCS or Memorie(s).
- YOU SHOULD enable **managed rotation** where available; otherwise use Lambda-based rotation.

## Minimum policy set
- YOU SHOULD apply principle of least privilege on roles used by CI, Lambda, Batch, or Containers.
- YOU SHOULD separate roles per environment (dev/test/stage/prod) & per service.

## Non-negotiables
- YOU MUST never paste secrets into chats, rules, or memories.
- If code change touches auth/keys, YOU MUST stop & request EXPLICIT PLAN re-approval.
(References: AWS guidance on roles vs. access keys & Secrets Manager rotation/best practices.)